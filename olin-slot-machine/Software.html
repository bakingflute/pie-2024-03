<!DOCTYPE html>
<html style="font-size: 16px;" lang="en"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Software">
    <meta name="description" content="">
    <title>Software</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
<link rel="stylesheet" href="Software.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 7.1.0, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    
    
    
    
    
    
    
    
    
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": ""
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Software">
    <meta property="og:type" content="website">
  <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>
  <body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en"><header class="u-clearfix u-header" id="sec-c89f"><div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <nav class="u-menu u-menu-one-level u-offcanvas u-menu-1">
          <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
            <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-hamburger-link u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="#">
              <svg class="u-svg-link" viewBox="0 0 24 24"><use xlink:href="#menu-hamburger"></use></svg>
              <svg class="u-svg-content" version="1.1" id="menu-hamburger" viewBox="0 0 16 16" x="0px" y="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><rect y="1" width="16" height="2"></rect><rect y="7" width="16" height="2"></rect><rect y="13" width="16" height="2"></rect>
</g></svg>
            </a>
          </div>
          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="./" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Overview.html" style="padding: 10px 20px;">Overview</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Mechanical.html" style="padding: 10px 20px;">Mechanical</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Electrical.html" style="padding: 10px 20px;">Electrical</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="Software.html" style="padding: 10px 20px;">Software</a>
</li></ul>
          </div>
          <div class="u-custom-menu u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="./">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Overview.html">Overview</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Mechanical.html">Mechanical</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Electrical.html">Electrical</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Software.html">Software</a>
</li></ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
      </div><style class="u-sticky-style" data-style-id="d163">.u-sticky-fixed.u-sticky-d163:before, .u-body.u-sticky-fixed .u-sticky-d163:before {
borders: top right bottom left !important
}</style></header>
    <section class="u-align-center u-clearfix u-container-align-center u-section-1" id="sec-0bb8">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h1 class="u-align-center u-text u-text-default u-text-1">Software</h1>
        <a href="https://github.com/kennethxiong23/olin-slot-machine" class="u-align-center u-border-none u-btn u-button-style u-custom-font u-heading-font u-btn-1">GitHub Repo </a>
        <h4 class="u-text u-text-default u-text-2"><b>The software aspect of this project relies on a state machine, which we used to manage the functionality of our slot machine. We also created a custom-built servo library and 3 PID controllers to control each of our 4-wire servos.</b>
        </h4>
      </div>
    </section>
    <section class="u-clearfix u-section-2" id="sec-3392">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h3 class="u-align-center u-text u-text-default u-text-1">Firmware</h3>
        <p class="u-align-left u-text u-text-default u-text-2"><b>The firmware for our slot machine is extremely straightforward. For our servos, we rely on the built-in Servo library for control as well as an input digital pin to convert the signal from the built-in hall effect sensor to position information. Our remaining coin slot and lever is a simple input digital pin that is looking for a high signal.</b>
        </p>
      </div>
    </section>
    <section class="u-clearfix u-section-3" id="sec-2978">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h3 class="u-align-center u-text u-text-default u-text-1">State Machine</h3>
        <p class="u-align-left u-text u-text-default u-text-2"><b>To control the behavior of the slot machine during different states we used a basic slot machine with the following states and behaviors for each state:</b>
        </p>
        <img class="u-image u-image-contain u-image-default u-image-1" src="images/AverageGambler1.png" alt="" data-image-width="1920" data-image-height="1080">
      </div>
    </section>
    <section class="u-clearfix u-section-4" id="sec-4686">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h3 class="u-align-center u-text u-text-default u-text-1"><b>Coin Slot and Lever</b>
        </h3>
        <p class="u-align-left u-text u-text-default u-text-2"><b>Our control mechanisms are quite simple. Our lever is a simple switch with two metal contacts that trigger a state change when they touch.</b>
          <br>
          <br><b>Our coin slot is a simple IR sensor that triggers a state change when the light intensity changes due to a coin blocking it.</b>
        </p>
      </div>
    </section>
    <section class="u-clearfix u-section-5" id="carousel_a2f3">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h3 class="u-align-center u-text u-text-default u-text-1">4 Pin Servo Library</h3>
        <p class="u-align-left u-text u-text-default u-text-2"><b>The servos that we used for this project are 4-wire servos that have an extra wire for a hall-effect encoder. To help reduce repetitive and messy code due to initializing and controlling three servos, we created a library called SlotWheel to handle some basic functionality. This library contains the following functions:<br>
            <br>test()<br>Returns the current encoder value. Used to debug our library.<br>
            <br>begin()<br> Initializes servo control using the Servo library and attaches the hall effect sensor to a digital pin.<br>
            <br>read()<br> The hall effect sensor encodes position by modulating the period of a square wave. This function calculates the position by reading the period of the wave and mapping it from a value of 0 to 255.<br>
            <br>write()<br> Sets the speed of the servo using the built-in write() function from the Servo class.<br>
            <br>getSpeed()<br>Returns the current speed of the servo.<br>
            <br>reset()<br> Rotates the servo until its position is zero.<br>
            <br>runToPosition()<br>Rotates the servo to a specified position.<br>
            <br>runToFace()<br>Rotates the servo to a specified face(assumes 5 faces).<br>
            <br>getFace()<br> Gets the current face that the slot wheel is showing(assumes 5 faces).</b>
        </p>
      </div>
    </section>
    <section class="u-clearfix u-section-6" id="sec-9fb3">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <h3 class="u-align-center u-text u-text-default u-text-1"><b>3 Servo Slot Wheel Control</b>
        </h3>
        <p class="u-align-left u-text u-text-default u-text-2"><b>After running all three slot wheels in unison, we found that runToPosition() did not adequately control the servos' position. This caused each servo to stop one after another. Something about the sequential stopping of each servo caused all of our servos to lose accuracy. To solve this problem, we implemented the fullSpin() function in our Arduino file. This function implements an individual P(ID) controller for each one of our slot wheels. By implementing the P(ID) ourselves, we can modulate the speed for all servos at the same time. This P(ID) controller only uses proportional to change the servo speed relative to the distance from the set point.</b>
        </p>
      </div>
    </section>
    <section class="u-clearfix u-section-7" id="carousel_9fe0">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h3 class="u-align-center u-text u-text-default u-text-1"><b>Predetermined Outcomes</b>
        </h3>
        <p class="u-align-left u-text u-text-default u-text-2"><b>To determine the outcome of the slot machine, we converted the phrase “we ate too much pie” into binary. In this sequence, the ones represent jackpots and the zeros represent losses. Whenever the state machine is iterated through, we increase the index that we look at in this sequence.Despite this predetermined win, we don’t rely on this binary sequence to determine the wins and losses.&nbsp;</b>
          <br>
          <br><b>At the end of the stopped state, we check the physical position of all the faces to see if a jackpot really happened or not. This is to account for any number of things that could go wrong&nbsp;</b>
        </p>
        <div class="custom-expanded u-align-left u-uploaded-video u-video u-video-1">
          <div class="embed-responsive">
            <video class="embed-responsive-item">
              <source src="files/IMG_0260.mp4" type="video/mp4">
              <p>Your browser does not support HTML5 video.</p>
            </video>
            <button class="u-video-poster"></button>
          </div>
        </div>
        <p class="u-align-center u-text u-text-3">Example of controlling faces  reset the wheels using&nbsp;with reset()</p>
      </div>
    </section>
    
    
    
    <footer class="u-align-center u-clearfix u-container-align-center u-footer u-grey-80 u-footer" id="sec-7591"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Princples of Integrated Engineering Fall 2024</p>
      </div></footer>
    <section class="u-backlink u-clearfix u-grey-80">
      <p class="u-text">
        <span>This site was created with the </span>
        <a class="u-link" href="https://nicepage.com/" target="_blank" rel="nofollow">
          <span>Nicepage</span>
        </a>
      </p>
    </section>
  
</body></html>